(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{mpk1:function(e,t,s){"use strict";s.r(t),s.d(t,"RoomModule",(function(){return G}));var n=s("PCNd"),o=s("ofXK"),r=s("tyNb");class a{constructor(e){this.name=e.name,this.text=e.text}}var c=s("lJxs"),i=s("1G5W"),m=s("XNiG"),b=s("fXoL"),u=s("AytR"),l=s("7JkF"),p=s("VGjC");let g=(()=>{class e extends l.a{constructor(e){super({url:`${u.a.websocket_url}/chat`,options:{transports:["websocket"],query:{name:e.getName()}}})}}return e.\u0275fac=function(t){return new(t||e)(b.Sb(p.a))},e.\u0275prov=b.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),d=(()=>{class e{constructor(e){this.socket=e}send(e){this.socket.emit("chatToServer",e),console.log(`Room service send: ${e}`)}brocast(e){this.socket.emit("brocastToServer",e),console.log(`Room service brocast: ${e}`)}receive(){return this.socket.fromEvent("chatToClient")}}return e.\u0275fac=function(t){return new(t||e)(b.Sb(g))},e.\u0275prov=b.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var f=s("Wp6s"),h=s("MutI"),v=s("FKr1");function w(e,t){if(1&e&&(b.Ob(0,"mat-list-item"),b.Kb(1,"img",1),b.Ob(2,"p",2),b.oc(3),b.Nb(),b.Ob(4,"p",2),b.oc(5),b.Nb(),b.Nb()),2&e){const e=t.$implicit;b.zb(3),b.pc(e.name),b.zb(2),b.pc(e.text)}}let N=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=b.Db({type:e,selectors:[["app-message-list"]],inputs:{messages:"messages"},decls:5,vars:1,consts:[[4,"ngFor","ngForOf"],["matListAvatar","","src","assets/ninja.png","alt","ninja icon"],["matLine",""]],template:function(e,t){1&e&&(b.Ob(0,"mat-card"),b.Ob(1,"mat-card-title"),b.oc(2," Room Messages "),b.Nb(),b.Ob(3,"mat-list"),b.nc(4,w,6,2,"mat-list-item",0),b.Nb(),b.Nb()),2&e&&(b.zb(4),b.cc("ngForOf",t.messages))},directives:[f.a,f.d,h.a,o.j,h.c,h.b,v.e],styles:[".mat-card[_ngcontent-%COMP%]{margin:10px}"]}),e})();class O{}var y=s("3Pt+"),M=s("kmnG"),x=s("qFsG"),F=s("bTqV"),S=s("NFeN");let k=(()=>{class e{constructor(e){this.formBuilder=e,this.$newedMessage=new b.n,this.initFormValue={text:""}}ngOnInit(){this.messageForm=this.formBuilder.group(this.initFormValue)}onSubmit(e){if(this.messageForm.valid){const t=new O;t.text=e.text,this.$newedMessage.emit(t),this.messageForm.reset(this.initFormValue)}}onReset(){this.messageForm.reset(this.initFormValue)}}return e.\u0275fac=function(t){return new(t||e)(b.Jb(y.b))},e.\u0275cmp=b.Db({type:e,selectors:[["app-message-form"]],inputs:{title:"title"},outputs:{$newedMessage:"$newedMessage"},decls:13,vars:2,consts:[[3,"formGroup","ngSubmit","reset"],["matInput","","formControlName","text","placeholder","Text","required",""],["align","end"],["type","submit","mat-icon-button","","color","primary"],["type","reset","mat-icon-button",""]],template:function(e,t){1&e&&(b.Ob(0,"mat-card"),b.Ob(1,"mat-card-title"),b.oc(2),b.Nb(),b.Ob(3,"form",0),b.Vb("ngSubmit",(function(){return t.onSubmit(t.messageForm.value)}))("reset",(function(){return t.onReset()})),b.Ob(4,"mat-form-field"),b.Kb(5,"input",1),b.Nb(),b.Ob(6,"mat-card-actions",2),b.Ob(7,"button",3),b.Ob(8,"mat-icon"),b.oc(9,"add_circle"),b.Nb(),b.Nb(),b.Ob(10,"button",4),b.Ob(11,"mat-icon"),b.oc(12,"restore"),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Nb()),2&e&&(b.zb(2),b.qc(" ",t.title," "),b.zb(1),b.cc("formGroup",t.messageForm))},directives:[f.a,f.d,y.l,y.h,y.d,M.b,x.a,y.a,y.g,y.c,y.k,f.b,F.a,S.a],styles:[".mat-card[_ngcontent-%COMP%]{margin:10px}"]}),e})();const $=[{path:"",component:(()=>{class e{constructor(e,t){this.roomService=e,this.userService=t,this.messages=[],this.destory$=new m.a}ngOnInit(){this.messages.push(new a({name:"Ninja",text:"Init room"}),new a({name:"Ninja",text:"Enjoy messaging"})),this.receiveMessage()}sendMessage(e){console.log(e);const t={name:this.userService.getName(),text:e.text};this.roomService.send(t)}brocastMessage(e){console.log(e);const t={name:this.userService.getName(),text:e.text};this.roomService.brocast(t)}receiveMessage(){this.roomService.receive().pipe(Object(c.a)(e=>new a(e)),Object(i.a)(this.destory$)).subscribe(e=>this.messages.push(e))}ngOnDestroy(){this.destory$.next()}}return e.\u0275fac=function(t){return new(t||e)(b.Jb(d),b.Jb(p.a))},e.\u0275cmp=b.Db({type:e,selectors:[["app-room"]],decls:3,vars:3,consts:[[3,"messages"],[3,"title","$newedMessage"]],template:function(e,t){1&e&&(b.Kb(0,"app-message-list",0),b.Ob(1,"app-message-form",1),b.Vb("$newedMessage",(function(e){return t.sendMessage(e)})),b.Nb(),b.Ob(2,"app-message-form",1),b.Vb("$newedMessage",(function(e){return t.brocastMessage(e)})),b.Nb()),2&e&&(b.cc("messages",t.messages),b.zb(1),b.cc("title","Send Message"),b.zb(1),b.cc("title","Brocast Message"))},directives:[N,k],styles:[""]}),e})()}];let j=(()=>{class e{}return e.\u0275mod=b.Hb({type:e}),e.\u0275inj=b.Gb({factory:function(t){return new(t||e)},imports:[[r.b.forChild($)],r.b]}),e})(),G=(()=>{class e{}return e.\u0275mod=b.Hb({type:e}),e.\u0275inj=b.Gb({factory:function(t){return new(t||e)},imports:[[o.c,j,n.a,y.j]]}),e})()}}]);